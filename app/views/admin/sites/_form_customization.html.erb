<%= form_for(@site, :url => admin_site_path(@site), :html => { :multipart => true }) do |f| %>

  <%= f.error_messages %>


  <div class="common">
    <h3>SITE CUSTOMIZATION</h3>
    <%= f.label :logo %>
    <div class="image_container">
      <% if @site.logo_file_name? %>
        <%= image_tag(@site.logo.url(:small)) %>
      <% end -%>
      <div class="field">
        <p>JPG, PNG and GIF supported</p>
        <%= f.file_field :logo %>
      </div>
    </div>

    <%= f.label :theme %>
    <ul class="themes">
      <% Theme.all.each_with_index do |theme, i| %>
      <li rel="<%= theme.id %>" class="<%='selected' if i == 0 %> <%= 'last' if i == Theme.count - 1 %>">
        <img src="<%= theme.thumbnail_path %>" width="157" height="135" alt="<%= theme.name %>">
        <a class="preview" href="http://<%= @site.url %>?theme_id=<%= theme.id %>">PREVIEW</a>
        <span class="ready"></span>
      </li>
      <% end %>
    </ul>
  </div>

  <div class="common">
    <h3>Partners</h3>
    <label>PARTNERS LIST</label>
    <% unless @site.partners.empty? %>
      <% @site.partners.each do |partner| %>
        <div class="partner">
          <%= image_tag(partner.logo.url(:small)) %>
          <p><%= partner.name %></p>
          <p class="bottom"><%= link_to(partner.url, partner.url) %></p>
          <%= link_to('Delete', '#delete', :class => "delete", :destroy_url=>admin_site_partner_path(@site, partner), :att_name=>"logo") %>
        </div>
      <% end -%>
    <% end -%>


    <span class="add_partner"><p>Add / edit the partners of the site</p><%= link_to('Add a partner', '#', :class => 'manage_partners') %></span>
  </div>


  <div class="common">
    <h3>Map configuration</h3>

    <label>HOME MAP</label>
    <div id="home_map_combo" class="list_combo">
      <span id="hidden" class="combo_large">
        <a class="organization">Default</a>
      </span>
      <ul class="list_combo_content">
        <li class="first"></li>
        <li class="element" id="16">Default<p class="amount_projects">Default</p></li>
        <li class="last"></li>
      </ul>
    </div>

    <label>PROJECT PAGE MAP</label>
    <div id="project_map_combo" class="list_combo">
      <span id="hidden" class="combo_large">
        <a class="organization">Default</a>
      </span>
      <ul class="list_combo_content">
        <li class="first"></li>
        <li class="element" id="15">Default<p class="amount_projects">Default</p></li>
        <li class="last"></li>
      </ul>
    </div>

    <label>REGION PAGE MAP</label>
    <div id="region_map_combo" class="list_combo">
      <span id="hidden" class="combo_large">
        <a class="organization">Default</a>
      </span>
      <ul class="list_combo_content">
        <li class="first"></li>
        <li class="element" id="14">Default<p class="amount_projects">Default</p></li>
        <li class="last"></li>
      </ul>
    </div>

    <label>CLUSTER/SECTOR PAGE MAP</label>
    <div id="cluster_map" class="list_combo">
      <span id="hidden" class="combo_large">
        <a class="organization">Default</a>
      </span>
      <ul class="list_combo_content">
        <li class="first"></li>
        <li class="element" id="13">Default<p class="amount_projects">Default</p></li>
        <li class="last"></li>
      </ul>
    </div>

    <label>NGO PAGE MAP</label>
    <div id="ngo_map_combo" class="list_combo">
      <span id="hidden" class="combo_large">
        <a class="organization">Default</a>
      </span>
      <ul class="list_combo_content">
        <li class="first"></li>
        <li class="element" id="12">Default<p class="amount_projects">Default</p></li>
        <li class="last"></li>
      </ul>
    </div>
  </div>


  <div class="common">
    <h3>Site navigation</h3>
    <label>Projects classification</label>
    <div class="field">
      <span>
        <%= f.radio_button :project_classification, '0' %>
        <p>Cluster</p>
      </span>
      <span>
        <%= f.radio_button :project_classification, '1' %>
        <p>Sector</p>
      </span>
    </div>
  </div>

  <div class="common">
    <h3>Fields & sections visibility</h3>
    <label>Configurable fields & sections</label>

    <div class="field">
      <span class="blog">
        <%= f.check_box :show_blog %><p>Show blog</p>
        <div id="tumbler_id" style="<%= (@site.blog_url.blank? ? 'display:none' : 'display:block') %>">
          <%= f.text_field :blog_url, :value=>"Please write Tumblr ID", :id=>"tumblr" %>
        </div>
      </span>
      <span>
        <%= f.check_box :show_global_donations_raises %><p>Show global donations raises</p>
      </span>
    </div>
  </div>

  <div class="common">
    <h3>NAMING</h3>
    <div class="field">
      <%= f.label :word_for_clusters %>
      <%= f.text_field :word_for_clusters, :class=>"short" %>
    </div>
    <div class="field">
      <%= f.label :word_for_regions %>
      <%= f.text_field :word_for_regions, :class=>"short" %>
    </div>
  </div>
  <%= f.hidden_field :theme_id, :value => Theme.first.id %>
  <%= f.submit 'Save' %>

<% end -%>



<div id="manage_partners" style="<%= @partner ? 'display:block' : 'display:none' %>">
  <a class="close">Close</a>
  <% unless @partner %>
  <h3 class="museo_sans">New partner</h3>
  <% else %>
  <h3 class="museo_sans">Edit partner</h3>
  <% end -%>

  <%= form_for([:admin, @site, (@partner || @site.partners.new)], :html => { :multipart => true }) do |f| %>

    <%= f.error_messages %>

    <div class="short_field">
      <%= f.label :name %>
      <%= f.text_field :name, :class=>"short" %>
    </div>

    <div class="short_field">
      <%= f.label :url %>
      <%= f.text_field :url, :class=>"short" %>
    </div>

    <div class="field">
      <%= f.label :logo %>
      <div class="image_container">
        <span class="white"></span>
        <p>JPG, PNG and GIF supported</p>
        <%= f.file_field :logo %>
      </div>
    </div>

    <div class="field">
      <%= f.submit 'Add partner', :class=>"partner" %>
    </div>

  <% end -%>
</div>


<script src="/javascripts/backoffice/customize.js" type="text/javascript" charset="utf-8"></script>
